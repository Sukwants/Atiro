[zh-CN](./README.md) | [en-US](./README_en-US.md) | ru-RU | [ja-JP](./README_ja-JP.md)

# Atiro

Atiro - это бесполезный инструмент для олимпиад по информатике. Atiro компилирует и запускает локальный код, а затем оценивает его с использованием локальных тестов.

## Содержание

- [Установка](#Установка)
- [Быстрый старт](#Быстрый-старт)
- [Использование](#Использование)
  - [Оценка](#Оценка)
  - [Инструменты Олимпиады](#Инструменты-Олимпиады)
  - [Конфигурация](#Конфигурация)
  - [Обновление](#Обновление)
- [Удаление](#Удаление)
- [Благодарности](#Благодарности)

## Установка

Прежде чем начать использовать Atiro, убедитесь, что у вас уже установлены следующие программы:

- [Node.js](https://nodejs.org/)

После установки Node.js вы можете установить Atiro с помощью следующей команды:

```bash
$ npm install -g atiro
```

Если Atiro уже установлен, вы можете обновить его следующей командой:

```bash
$ npm update -g atiro
```

Чтобы убедиться, что Atiro работает правильно, вам также потребуется установить компилятор C++ g++ на вашем компьютере и сделать его доступным из командной строки. Для компьютеров под управлением Windows вы также можете указать путь к программе g++ с помощью следующей команды:

```bash
$ atiro config compiler.path --set <путь/к/g++>
```

Это необходимо для компиляции.

## Быстрый старт

Если вы хотите быстро начать использовать Atiro, вот несколько основных шагов:

1. Напишите программу-ответ (например, `A.cpp`).

2. Используйте следующую команду для оценки:

```bash
$ atiro judge A
```

Это скомпилирует `A.cpp`, выполнит его и оценит, используя стандартные файлы с данными (A*.in / A*.ans).

## Использование

**Atiro не ограничивает программы-ответы и вспомогательные программы для оценки, убедитесь, что вы доверяете им, и не используйте их на публичных или онлайн-системах оценки.**

### Оценка

```bash
$ atiro judge|j [файл] [данные] [опции]
```

Компиляция кода, выполнение и оценка для каждого набора тестовых данных.

**Простые примеры:**

```bash
$ atiro j               # Компилировать TEST.cpp и выполнять, оценивать с данными TEST*.in / TEST*.ans
```

```bash
$ atiro j A             # Компилировать A.cpp и выполнять, оценивать с данными A*.in / A*.ans
```

```bash
$ atiro j A-std A       # Компилировать A-std.cpp и выполнять, оценивать с данными A*.in / A*.ans
```

**Подробное объяснение:**

`file`, указывает имя файла программы-ответа, по умолчанию `TEST`.

`data`, указывает имя файла тестовых данных. Если не указано `generator`, это выражение с шаблоном по умолчанию, по умолчанию `<file>*`, то есть совпадает с предыдущим параметром `<file>`. При указании `generator` этот параметр указывает точное имя файла.

Сначала компилируется `<file>.cpp` и создается файл `<file>` / `<file>.exe`. Затем поиск всех файлов, соответствующих `<data>.in`, и запускаются в качестве входных данных, выводя результат в `<data>.out`, если существует `<data>.ans`, сравнивается с `<data>.out`. При указании `generator` он будет последовательно создавать входные данные в `<data>.in`.

Дополнительные параметры:

- `-c, --comp "-O2 -std=c++14"`, указывает параметры компиляции по умолчанию, по умолчанию без параметров.
- `-t, --time 1000`, указывает ограничение времени в миллисекундах, по умолчанию `5000`.
- `-j, --judg real`, указывает способ сравнения: `text` - текстовое сравнение, `numb` - сравнение целых чисел, `real` - сравнение действительных чисел с относительной погрешностью `1e-9`, также можно указать имя файла `checker` по умолчанию - `text`.
- `-g, --grad grader`, указывает имя файла `interactor`, что означает, что задача является интерактивной.
- `-s, --solv solver`, указывает имя файла `solver`, что означает, что стандартный ответ будет вычислен с помощью `solver`, а не заранее подготовлен.
- `-m, --make maker`, указывает имя файла `generator`, что означает, что следующие тестовые данные будут создаваться `generator`, как правило, это используется совместно с `solver`, что в китайской среде часто называется "до-проверка".

- `-a, --allj`, принудительно тестировать все данные. Если этот параметр не используется, тестирование прекращается при первом непринятом результате. При указании `generator` это означает, что "до-проверка" будет продолжаться до активного завершения программы.

Здесь есть простые примеры для вышеуказанных команд: [https://github.com/Sukwants/Atiro-examples](https://github.com/Sukwants/Atiro-examples)

#### Вспомогательные программы для оценки

Atiro поддерживает вспомогательные программы для оценки: `checker`, `interactor`, `solver`, `generator`. За исключением `solver`, рекомендуется использовать `testlib.h` ([GitHub проект](https://github.com/MikeMirzayanov/testlib)). Atiro не включает `testlib.h`, поэтому его нужно загрузить самостоятельно. Вы также можете выбрать вручную обработку параметров и файлов.

Опции компиляции для вспомогательных программ для оценки соответствуют опциям компиляции программы-ответа. За исключением `solver`, время выполнения не ограничивается, а для `solver` ограничение времени выполнения такое же, как для программы-ответа.

- `checker` - сравниватель, поддерживает `testlib.h`, указывается с помощью опции `--judg`. Если вы не используете `testlib.h`, передаются 3 аргумента: `<input file>`, `<output file>`, `<answer file>`, соответствующие `.in` файлу, `.out` файлу и `.ans` файлу. Программа должна сама сообщать результат оценки и возвращать `0` при "принятии" и не `0` в противном случае.
- `interactor` - интерактор, поддерживает `testlib.h`, указывается с помощью опции `--grad`. Если вы не используете `testlib.h`, передаются 2 аргумента: `<input file>`, `<output file>`, соответствующие файлу `.in` и файлу `.out`, и интерактор взаимодействует с входом и выходом программы-ответа. Программа возвращает `0` при корректном завершении интеракции и не `0` при наличии ошибок интеракции.
- `solver` - решатель, указывается с помощью опции `--solv`. Считывает данные из файла `.in` и записывает результат в файл `.ans`. Программа возвращает `0` при корректном завершении интеракции и не `0`, если возникает ошибка времени выполнения. Обычно решатель написан в формате программы-ответа.
- `generator` - генератор, поддерживает `testlib.h`, указывается с помощью опции `--make`. Если вы не используете `testlib.h`, передаются 2 аргумента: `<номер данных>`, `<зерно>`, где `<номер данных>` - это номер набора тестов, `<зерно>` - случайная строка длиной 10 символов, которая также будет указана в заголовке строки данных в консоли. Генерируемые данные выводятся в стандартный поток вывода. Не обрабатывает возвращаемое значение, но рекомендуется, чтобы оно было равно `0`.

### Инструменты Олимпиады

```bash
$ atiro <oj> login|i | logout|o | get|g <id> [file] | submit|s [file] [id]
```

Войти и выйти из Atiro на платформу Online Judge, получить примеры задач с Online Judge или отправить ответ на задачу на Online Judge.

`<oj>` может быть выбран из `codeforces|cf`, `atcoder|at`, `luogu|lg`, `vjudge|vj`.

**Примеры использования:**

```bash
$ atiro lg i                             # Войти в Atiro на платформу Луогу
```

```bash
$ atiro vj o                             # Выйти из Atiro с платформы Vjudge
```

```bash
$ atiro cf g https://codeforces.com/contest/1/problem/A
# Получить примеры задачи 1A с Codeforces, файл будет назван TEST
```

```bash
$ atiro cf g https://codeforces.com/contest/1
# Получить примеры всех задач соревнования 1 с Codeforces, файлы будут названы по номеру задачи
```

```bash
$ atiro at s C https://atcoder.jp/contests/arc100/tasks/arc100_a
# Отправить файл C.cpp на задачу ARC100A на платформе AtCoder
```

**Подробное объяснение:**

`<oj>` - указывает платформу Online Judge, поддерживаются Codeforces (`codeforces|cf`), AtCoder (`atcoder|at`), Luogu (`luogu|lg`), vjudge (`vjudge|vj`).

Доступные команды:

- `login|i` - войти на платформу Online Judge. Для получения примеров задач и отправки ответов на задачи на платформе Online Judge необходимо войти в аккаунт Atiro.
- `logout|o` - выйти с платформы Online Judge.
- `get|g <id> [file]` - получить примеры задачи или всех задач соревнования с платформы Online Judge. `<id>` может быть URL или идентификатором задачи или соревнования. Если вы хотите получить примеры одной задачи, вы можете указать `[file]` для задания имени файла, в противном случае будет использовано имя задачи.

- `submit|s [file] [id]` - отправить ответ на задачу. `[file]` - это имя файла программы-ответа, по умолчанию это глобальное имя файла по умолчанию, `[id]` - это URL или идентификатор задачи.

Идентификатор задачи или соревнования, такой как `1A` или `1` для Codeforces, `"arc100 a"` или `arc100` для AtCoder, `P1004` или `1` или `"P1004 1"` (для отправки на соревнование) для Луогу, `CodeForces-1A` для vjudge.

### Конфигурация

```bash
$ atiro config|c <ключ> [-g, --get] [-s, --set <значение>] [-u, --unset]
```

Настройка пользовательских параметров.

**Примеры использования:**

```bash
$ atiro c file.name --get                    # Получить текущее значение глобального имени файла по умолчанию
```

```bash
$ atiro c judge.comp --set "-O2 -std=c++14"  # Установить параметры компиляции по умолчанию в "-O2 -std=c++14"
```

```bash
$ atiro c judge.time --unset                 # Очистить настройки времени выполнения по умолчанию
```

**Подробное объяснение:**

`ключ` - указывает на конфигурационный параметр, который будет настроен.

Доступные операции:

- `-g, --get` - получить текущее значение параметра.
- `-s, --set <значение>` - установить значение параметра на `значение`.
- `-u, --unset` - установить значение параметра на пустое (использовать значение по умолчанию).

Доступные конфигурационные параметры:

- `compiler.path` - путь к компилятору, если g++ можно вызвать глобально.
- `file.name` - глобальное имя файла по умолчанию, включая параметр `file` в команде `judge`, имя файла по умолчанию для получения примеров и отправки ответов на задачи.
- `judge.comp` - параметры компиляции по умолчанию для команды `judge`, по умолчанию без параметров.
- `judge.time` - ограничение времени выполнения по умолчанию для команды `judge`, по умолчанию `5000`.
- `judge.judg` - метод сравнения по умолчанию / `checker` для команды `judge`, по умолчанию `text`.
- `judge.grad` - метод `interactor` по умолчанию для команды `judge`, по умолчанию `interactor`.
- `judge.solv` - метод `solver` по умолчанию для команды `judge`, по умолчанию `solver`.
- `judge.make` - метод `generator` по умолчанию для команды `judge`, по умолчанию `generator`.
- `update.type` - режим автоматической проверки обновлений.

### Обновление

```bash
$ atiro update|u [type|t | notice|n | ignore|i]
```

Проверьте и обновите Atiro, или установите режим автоматической проверки обновлений.

- `atiro update` - проверьте и обновите Atiro.
- `atiro update type` - запросить текущий режим автоматической проверки обновлений: `notice` или `ignore`.
- `atiro update notice` - установите режим автоматической проверки обновлений на `notice`, Atiro будет автоматически проверять наличие обновлений каждые 48 часов и повторно через 12 часов, если проверка не удалась. Это режим по умолчанию.
- `atiro update ignore` - установите режим автоматической проверки обновлений на `ignore`, Atiro будет игнорировать обновления.

Вы также можете использовать команду `config` для проверки и изменения значения параметра `update.type`, который можно установить на `notice` или `ignore`.

## Удаление

Для удаления Atiro используйте команду npm так же, как и при установке:

```bash
$ npm uninstall -g Atiro
```

Если вам больше не нужен Node.js, удалите Node.js.

Если вам больше не нужен g++, удалите g++.

## Благодарности

[![Sukwants](https://avatars.githubusercontent.com/u/95968907?s=64&v=4)](https://github.com/Sukwants) [![zhangyt](https://avatars.githubusercontent.com/u/115882588?s=64&v=4)](https://github.com/zzhangyutian) [![赵悦岑](https://avatars.githubusercontent.com/u/96607031?s=64&v=4)](https://github.com/2745518585)
